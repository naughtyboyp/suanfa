P1083 [NOIP2012 提高组] 借教室
提交
65.67k
通过
20.83k
时间限制
1.00s
内存限制
125.00MB
提交答案
加入题单
题目提供者
CCF_NOI
难度
普及+/提高
历史分数
100
 提交记录  查看题解
标签
NOIp 提高组
2012
进入讨论版
相关讨论
推荐题目
 展开
题目描述
在大学期间，经常需要租借教室。大到院系举办活动，小到学习小组自习讨论，都需要向学校申请借教室。教室的大小功能不同，借教室人的身份不同，借教室的手续也不一样。

面对海量租借教室的信息，我们自然希望编程解决这个问题。

我们需要处理接下来nn天的借教室信息，其中第ii天学校有r_ir 
i
​
 个教室可供租借。共有mm份订单，每份订单用三个正整数描述，分别为d_j,s_j,t_jd 
j
​
 ,s 
j
​
 ,t 
j
​
 ，表示某租借者需要从第s_js 
j
​
 天到第t_jt 
j
​
 天租借教室（包括第s_js 
j
​
 天和第t_jt 
j
​
 天），每天需要租借d_jd 
j
​
 个教室。

我们假定，租借者对教室的大小、地点没有要求。即对于每份订单，我们只需要每天提供d_jd 
j
​
 个教室，而它们具体是哪些教室，每天是否是相同的教室则不用考虑。

借教室的原则是先到先得，也就是说我们要按照订单的先后顺序依次为每份订单分配教室。如果在分配的过程中遇到一份订单无法完全满足，则需要停止教室的分配，通知当前申请人修改订单。这里的无法满足指从第s_js 
j
​
 天到第t_jt 
j
​
 天中有至少一天剩余的教室数量不足d_jd 
j
​
 个。

现在我们需要知道，是否会有订单无法完全满足。如果有，需要通知哪一个申请人修改订单。

输入格式
第一行包含两个正整数n,mn,m，表示天数和订单的数量。

第二行包含nn个正整数，其中第ii个数为r_ir 
i
​
 ，表示第ii天可用于租借的教室数量。

接下来有mm行，每行包含三个正整数d_j,s_j,t_jd 
j
​
 ,s 
j
​
 ,t 
j
​
 ，表示租借的数量，租借开始、结束分别在第几天。

每行相邻的两个数之间均用一个空格隔开。天数与订单均用从11开始的整数编号。

输出格式
如果所有订单均可满足，则输出只有一行，包含一个整数00。否则（订单无法完全满足）

输出两行，第一行输出一个负整数-1−1，第二行输出需要修改订单的申请人编号。

输入输出样例
输入 #1复制
4 3 
2 5 4 3 
2 1 3 
3 2 4 
4 2 4
输出 #1复制
-1 
2
说明/提示
【输入输出样例说明】

第 11份订单满足后，44天剩余的教室数分别为 0,3,2,30,3,2,3。第 22 份订单要求第 22天到第 44 天每天提供33个教室，而第 33 天剩余的教室数为22，因此无法满足。分配停止，通知第22 个申请人修改订单。

【数据范围】

对于10%的数据，有1≤ n,m≤ 101≤n,m≤10；

对于30%的数据，有1≤ n,m≤10001≤n,m≤1000；

对于 70%的数据，有1 ≤ n,m ≤ 10^51≤n,m≤10 
5
 ；

对于 100%的数据，有1 ≤ n,m ≤ 10^6,0 ≤ r_i,d_j≤ 10^9,1 ≤ s_j≤ t_j≤ n1≤n,m≤10 
6
 ,0≤r 
i
​
 ,d 
j
​
 ≤10 
9
 ,1≤s 
j
​
 ≤t 
j
​
 ≤n。

NOIP 2012 提高组 第二天 第二题


#include<algorithm>
#include<cstdio>
#include<cstring>
#include<cmath>
#include <iostream>
#include<stack>
#include<cstdlib>
#include<map>
#pragma warning(disable:4996) 
using namespace std;
typedef long long ll;
//总结 差分+二分
//把修改订单人的编号二分
//1.将m个订单存放进二维数组
//2.订单人编号为1-m 将其二分
//3.编号为mid 就用循环1-mid 差分
//4.求前缀和，判断数组中是否有 <0的 如果有就缩小范围  没有就扩大

int n = 0;
int m = 0;
int a[1000005];//原数组
int b[1000005];//初始差分数组
int p[1000005];//copy版差分数组
int d[1000005];//差分前缀和  找答案
int c[1000005][3];//存放订单

int check(int mid)//判断第mid个行不行
{
    //判断mid行不行 即判断1-mid订单的全部前缀和 是否越界
    int i = 0;
    int j = 0;
    for (i = 1; i <= n; i++)
    {
        p[i] = b[i];
    }
    for (i = 1; i <= mid; i++)
    {
        int s = c[i][1];
        int t = c[i][2];
        int d = c[i][0];
        p[s] -= d;
        p[t+1] += d;
    }
    memset(d, 0, sizeof(d));
    for (i = 1; i <= n; i++)
    {
        d[i] += d[i - 1] + p[i];
        if (d[i] < 0)
        {
            return 0;
        }
    }
    return 1;
}
int main()
{
   
    cin >> n >> m;
    int i = 0;
    for (i = 1; i <= n; i++)
    {
        cin >> a[i];
        b[i] = a[i] - a[i - 1];
    }
    for (i = 1; i <= m; i++)
    {
        cin >> c[i][0] >> c[i][1] >> c[i][2];
    }
    int l = 0;
    int r = m+1;
    while (l + 1 < r)
    {
        int mid = (l + r) / 2;
        if (check(mid))
        {
            l = mid;
        }
        else
        {
            r = mid;
        }
    }
    if (r == m+1)
    {
        cout << 0;
    }
    else
    {
        cout << -1 << endl << r;
    }

    return 0;
}





P1083 [NOIP2012 提高组] 借教室
提交
65.67k
通过
20.83k
时间限制
1.00s
内存限制
125.00MB
提交答案
加入题单
题目提供者
CCF_NOI
难度
普及+/提高
历史分数
100
 提交记录  查看题解
标签
NOIp 提高组
2012
进入讨论版
相关讨论
推荐题目
 展开
题目描述
在大学期间，经常需要租借教室。大到院系举办活动，小到学习小组自习讨论，都需要向学校申请借教室。教室的大小功能不同，借教室人的身份不同，借教室的手续也不一样。

面对海量租借教室的信息，我们自然希望编程解决这个问题。

我们需要处理接下来nn天的借教室信息，其中第ii天学校有r_ir 
i
​
 个教室可供租借。共有mm份订单，每份订单用三个正整数描述，分别为d_j,s_j,t_jd 
j
​
 ,s 
j
​
 ,t 
j
​
 ，表示某租借者需要从第s_js 
j
​
 天到第t_jt 
j
​
 天租借教室（包括第s_js 
j
​
 天和第t_jt 
j
​
 天），每天需要租借d_jd 
j
​
 个教室。

我们假定，租借者对教室的大小、地点没有要求。即对于每份订单，我们只需要每天提供d_jd 
j
​
 个教室，而它们具体是哪些教室，每天是否是相同的教室则不用考虑。

借教室的原则是先到先得，也就是说我们要按照订单的先后顺序依次为每份订单分配教室。如果在分配的过程中遇到一份订单无法完全满足，则需要停止教室的分配，通知当前申请人修改订单。这里的无法满足指从第s_js 
j
​
 天到第t_jt 
j
​
 天中有至少一天剩余的教室数量不足d_jd 
j
​
 个。

现在我们需要知道，是否会有订单无法完全满足。如果有，需要通知哪一个申请人修改订单。

输入格式
第一行包含两个正整数n,mn,m，表示天数和订单的数量。

第二行包含nn个正整数，其中第ii个数为r_ir 
i
​
 ，表示第ii天可用于租借的教室数量。

接下来有mm行，每行包含三个正整数d_j,s_j,t_jd 
j
​
 ,s 
j
​
 ,t 
j
​
 ，表示租借的数量，租借开始、结束分别在第几天。

每行相邻的两个数之间均用一个空格隔开。天数与订单均用从11开始的整数编号。

输出格式
如果所有订单均可满足，则输出只有一行，包含一个整数00。否则（订单无法完全满足）

输出两行，第一行输出一个负整数-1−1，第二行输出需要修改订单的申请人编号。

输入输出样例
输入 #1复制
4 3 
2 5 4 3 
2 1 3 
3 2 4 
4 2 4
输出 #1复制
-1 
2
说明/提示
【输入输出样例说明】

第 11份订单满足后，44天剩余的教室数分别为 0,3,2,30,3,2,3。第 22 份订单要求第 22天到第 44 天每天提供33个教室，而第 33 天剩余的教室数为22，因此无法满足。分配停止，通知第22 个申请人修改订单。

【数据范围】

对于10%的数据，有1≤ n,m≤ 101≤n,m≤10；

对于30%的数据，有1≤ n,m≤10001≤n,m≤1000；

对于 70%的数据，有1 ≤ n,m ≤ 10^51≤n,m≤10 
5
 ；

对于 100%的数据，有1 ≤ n,m ≤ 10^6,0 ≤ r_i,d_j≤ 10^9,1 ≤ s_j≤ t_j≤ n1≤n,m≤10 
6
 ,0≤r 
i
​
 ,d 
j
​
 ≤10 
9
 ,1≤s 
j
​
 ≤t 
j
​
 ≤n。

NOIP 2012 提高组 第二天 第二题


